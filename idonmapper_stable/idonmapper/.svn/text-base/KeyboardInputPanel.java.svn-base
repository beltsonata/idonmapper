package idonmapper;


import java.awt.*;
import javax.swing.*;
import java.awt.geom.*;
import java.awt.event.*;
import java.util.*;
import net.miginfocom.swing.MigLayout;

/* 
 * GUI component used to capture the user's 
 * ideas and send them to Idons. This is very tightly
 * coupled with HexPanel. Should refactor????? 
 */
public class KeyboardInputPanel extends JPanel implements ActionListener
{
    private JTextField textfield;
    
    private static final int TEXT_FIELD_LENGTH = 50;
    
    public KeyboardInputPanel()
    {
        super(new MigLayout());
        textfield = new JTextField(TEXT_FIELD_LENGTH);
        textfield.addActionListener(this);
        add(textfield);
    }
    
    /**
     * Clear the panel's JTextField of text.
     */
    protected void clearTextField()
    {
        textfield.setText("");
    }
    
    protected JTextField getTextField()
    {
        return textfield;
    }
    
    public void actionPerformed(ActionEvent e)
    {   
        if(getTextField().equals(""))
        {
            return;
        }
        
        // use the user's idea as the basis for set retrieval
        // get the first unoccupied cell
        Coord coord = Controller.getHexPanel().getUnoccupiedCell();
        if(coord == null)
        {
            throw new NullPointerException("No unoccupied cell found!");
        }
        Controller.getHexPanel().addIdon(coord, text);
        clearTextField();
        getSetFromIdea(text);
    }
    
    
    /*
     * Fills the SuggestionPanel with a set based upon String s.
     */
    protected void getSetFromIdea(String s)
    {
        ArrayList<String> l = new ArrayList<String>();
        l.add(s);
        Controller.getSuggestionPanel().setThreadStringList(l);
        Controller.getSuggestionPanel().run();
        
        //HashSet<String> set = Controller.getSetRetriever().requestSet(l, true);
        //Controller.getSuggestionPanel().setSuggestions(set);
        
    }
       
}
